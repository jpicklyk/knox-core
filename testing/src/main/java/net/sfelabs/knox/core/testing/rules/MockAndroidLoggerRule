// JUnit4 @Rule
//
// usage:
//
// class TestClass {
//
//   @get:Rule val rule = MockkAndroidLoggerRule()
//
//   ...
// }
import android.util.Log
import io.mockk.clearStaticMockk
import io.mockk.every
import io.mockk.mockkStatic
import org.junit.rules.ExternalResource

class MockkAndroidLoggerRule : ExternalResource() {

    override fun before() {
        super.before()
        mockkStatic(Log::class)
        every { Log.v(any(), any()) } returns 0
        every { Log.v(any(), any(), any()) } returns 0
        every { Log.d(any(), any()) } returns 0
        every { Log.d(any(), any(), any()) } returns 0
        every { Log.i(any(), any()) } returns 0
        every { Log.i(any(), any(), any()) } returns 0
        every { Log.w(any(), any<String>()) } returns 0
        every { Log.w(any(), any<Throwable>()) } returns 0
        every { Log.w(any(), any(), any()) } returns 0
        every { Log.e(any(), any()) } returns 0
        every { Log.e(any(), any(), any()) } returns 0
        every { Log.wtf(any(), any<String>()) } returns 0
        every { Log.wtf(any(), any<Throwable>()) } returns 0
        every { Log.wtf(any(), any(), any()) } returns 0
    }

    override fun after() {
        super.after()
        clearStaticMockk(Log::class)
    }
}
